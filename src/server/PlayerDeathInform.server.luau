-- PlayerDeathTracker.lua (ServerScriptService)
-- Player íŒ€ì›ì´ ì£½ìœ¼ë©´ íƒˆë½ ë©”ì‹œì§€ í‘œì‹œ
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local InRound = ReplicatedStorage:WaitForChild("InRound")
local Status = ReplicatedStorage:WaitForChild("Status")
local Inform = ReplicatedStorage:WaitForChild("Inform")

-- í”Œë ˆì´ì–´ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ì„¤ì •
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function(character)
		local humanoid = character:WaitForChild("Humanoid")

		-- í”Œë ˆì´ì–´ê°€ ì£½ì—ˆì„ ë•Œ
		humanoid.Died:Connect(function()
			-- ê²Œì„ì´ ì§„í–‰ ì¤‘ì´ê³ , Player íŒ€ì¼ ë•Œë§Œ
			if InRound.Value and player.Team and player.Team.Name == "Player" then
				-- í˜„ì¬ Statusê°€ WINSë¥¼ í¬í•¨í•˜ì§€ ì•Šì„ ë•Œë§Œ (ê²Œì„ ì¢…ë£Œ ì•„ë‹ ë•Œ)
				if not string.find(string.upper(Status.Value), "WINS") then
					-- íƒˆë½ ë©”ì‹œì§€ í‘œì‹œ
					Inform.Value = "ğŸ’€ " .. player.Name .. " Eliminated!"
				end
			end
		end)
	end)
end)

-- ì´ë¯¸ ì ‘ì†í•œ í”Œë ˆì´ì–´ë“¤ë„ ì„¤ì •
for _, player in pairs(Players:GetPlayers()) do
	if player.Character then
		local humanoid = player.Character:FindFirstChild("Humanoid")
		if humanoid then
			humanoid.Died:Connect(function()
				if InRound.Value and player.Team and player.Team.Name == "Player" then
					if not string.find(string.upper(Status.Value), "WINS") then
						Inform.Value = "ğŸ’€ " .. player.Name .. " Eliminated!"
					end
				end
			end)
		end
	end

	player.CharacterAdded:Connect(function(character)
		local humanoid = character:WaitForChild("Humanoid")

		humanoid.Died:Connect(function()
			if InRound.Value and player.Team and player.Team.Name == "Player" then
				if not string.find(string.upper(Status.Value), "WINS") then
					Inform.Value = "ğŸ’€ " .. player.Name .. " eliminated!"
				end
			end
		end)
	end)
end

print("í”Œë ˆì´ì–´ íƒˆë½ ì•Œë¦¼ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ")
